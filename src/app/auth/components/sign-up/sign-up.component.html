<form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-container">
  <fieldset>
    <legend class="form-title">Registrarse</legend>

    <section class="form-group">
      <label for="email">Correo electrónico</label>
      <input type="text" id="email" formControlName="email" class="input-field">
      @if (form.controls['email'].touched) {
        <span *ngIf="form.controls['email'].hasError('required')" class="error-msg">El email es obligatorio</span>
        <span *ngIf="form.controls['email'].hasError('email')" class="error-msg">El email no es válido</span>
      }
    </section>

    <section class="form-group">
      <label for="username">Nombre de Usuario</label>
      <input type="text" id="username" formControlName="username" class="input-field">
      @if (form.controls['username'].touched && form.controls['username'].invalid) {
        <div class="error-msg">El nombre de usuario es obligatorio y debe tener al menos 4 caracteres.</div>
      }
    </section>

    <section class="form-group">
      <label for="name">Nombre</label>
      <input type="text" id="name" formControlName="name" class="input-field">
      @if (form.controls['name'].touched && form.controls['name'].invalid) {
        <div class="error-msg">El nombre es obligatorio.</div>
      }
    </section>

    <section class="form-group">
      <label for="surname">Apellido</label>
      <input type="text" id="surname" formControlName="surname" class="input-field">
      @if (form.controls['surname'].touched && form.controls['surname'].invalid) {
        <div class="error-msg">El apellido es obligatorio.</div>
      }
    </section>

    <section class="form-group">
      <label for="password">Contraseña</label>
      <input type="password" id="password" formControlName="password" class="input-field">

      @if (form.controls['password'].hasError('required') && (form.controls['password'].touched || submitPress)) {
        <div class="error-msg">
          La contraseña es obligatoria.
        </div>
      }

      @if (form.controls['password'].hasError('minlength') && (form.controls['password'].touched || submitPress)) {
        <div class="error-msg">
          La contraseña debe tener al menos 8 caracteres.
        </div>
      }

      @if (form.controls['password'].hasError('pattern') && submitPress) {
        <div class="error-msg">
          La contraseña debe incluir una mayúscula, una minúscula y un carácter especial.
        </div>
      }
    </section>


    <section class="form-group">
      <label for="yearsOfExperience">Años de Experiencia</label>
      <input type="number" id="yearsOfExperience" formControlName="yearsOfExperience" class="input-field">
      @if (form.controls['yearsOfExperience'].touched && form.controls['yearsOfExperience'].invalid) {
        <div class="error-msg">Los años de experiencia son obligatorios.</div>
      }
    </section>

    <section class="form-group">
      <label for="industry">Industria</label>
      <div class="select-container">
        <select id="industry" formControlName="industry" class="input-field">
          <option value="tecnologia">Tecnología</option>
          <option value="salud">Salud</option>
          <option value="educacion">Educación</option>
          <option value="sostenibilidad">Sostenibilidad</option>
          <option value="alimentacion">Alimentación</option>
        </select>
        <div class="select-arrow"></div> <!-- Flecha personalizada -->
      </div>
      @if (form.controls['industry'].touched && form.controls['industry'].invalid) {
        <div class="error-msg">La industria es obligatoria.</div>
      }
    </section>

    <app-address-form (address)="updateAddress($event)"></app-address-form>

    <button type="submit" [disabled]="form.invalid" class="submit-btn">Enviar</button>
  </fieldset>
</form>
